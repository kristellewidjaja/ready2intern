
# Code Agent Workflow – [PROJECT-NAME]

## Instructions for Coding Agent

**CRITICAL WORKFLOW REQUIREMENTS**:

### Before Starting a Task:
1. Read the task’s `referenceDocuments` array – these contain requirements, design specs, and implementation guidance
2. Review the `implementationNotes` for key decisions and approaches
3. If you have questions about WHAT to build or HOW to build it, the answer is in the reference documents

### During Task Execution:
4. **REQUIRED**: Update task status to `"current"` when you start working on it
5. **REQUIRED**: Update subtask statuses as you complete them

### After Completing a Task:
6. **REQUIRED**: Update task status to `"complete"`
7. **REQUIRED**: Update the `lastUpdated` timestamp to current date/time
8. **REQUIRED**: Update the `note` field with progress summary
9. If all tasks complete, change overall `status` to `complete`

**⚠️ A FAILURE TO UPDATE THIS FILE WILL BREAK THE UI AND WORKFLOW TRACKING ⚠️**

---

## Status Update Protocol

**Status Values**: `not_started` | `current` | `complete`

**BEFORE task**: Set `status="current"`, update `activeTask`
**AFTER task**: Set `status="complete"`, increment `completed`, recalc `percentage`, set NEXT to `"current"`
**Validate**: JSON valid, counts match, percentage = (completed/total)×100

**Cascading Rules (IMPORTANT)**:
- When first subtask starts ➜ both subtask AND parent must become `current`
- When last subtask completes ➜ both subtask AND parent must become `complete`
- For middle subtasks ➜ previous becomes `complete`, current becomes `current`, parent stays `current`

---

## Current Status  
<workflow-status>
```json
{
  "status": "ready",
  "lastUpdated": "2024-03-15T10:30:00Z",
  "note": "Tasks 3-N will be generated by Task 1 after analyzing Design Agent outputs. Status will change to 'in-progress' once Task 2 completes.",
  "taskDetails": [
    {
      "taskNumber": "0",
      "taskName": "Input Validation & Implementation Planning",
      "status": "not_started",
      "referenceDocuments": [
        "specification-package-iteration-*/README.md",
        "specification-package-iteration-*/requirements/",
        "specification-package-iteration-*/user-stories/",
        "supplement-material/"
      ],
      "implementationNotes": "Detect input source, validate quality, propose stack organization",
      "subtasks": [
        {
          "taskNumber": "0.1",
          "taskName": "Detect input source (Design Agent vs user documents)",
          "status": "not_started"
        },
        {
          "taskNumber": "0.2",
          "taskName": "Validate documentation quality (if user documents)",
          "status": "not_started"
        },
        {
          "taskNumber": "0.3",
          "taskName": "Propose stack organization and get user confirmation",
          "status": "not_started"
        },
        {
          "taskNumber": "0.4",
          "taskName": "Check for ADRs and blueprint integration",
          "status": "not_started"
        }
      ]
    },
    {
      "taskNumber": "1",
      "taskName": "Load Implementation Tasks",
      "status": "not_started",
      "referenceDocuments": [],
      "implementationNotes": "Will be populated by Task 0 – Generate dynamic implementation plan",
      "subtasks": [
        {
          "taskNumber": "1.1",
          "taskName": "Read and analyze all design documents",
          "status": "not_started"
        },
        {
          "taskNumber": "1.2",
          "taskName": "Generate implementation plan with task breakdown",
          "status": "not_started"
        },
        {
          "taskNumber": "1.3",
          "taskName": "Populate code-handoff.md with generated tasks",
          "status": "not_started"
        }
      ]
    },
    {
      "taskNumber": "2",
      "taskName": "Project Setup",
      "status": "not_started",
      "referenceDocuments": [],
      "implementationNotes": "Will be populated by Task 1 - Initialize project structure",
      "subtasks": [
        {
          "taskNumber": "2.1",
          "taskName": "Create project directory structure",
          "status": "not_started"
        },
        {
          "taskNumber": "2.2",
          "taskName": "Copy blueprint or create custom structure",
          "status": "not_started"
        }
      ]
    }
  ]
}
```
</workflow-status>

## Files Created/Updated
*Workflow not started*

## Key Insights & Decisions
*Workflow not started*

---

## Reminder: Update This File After Every Task

**This file is the source of truth for workflow progress.** The UI and workflow tracking depend on it being kept up-to-date.

After completing each task, you MUST:
1. Update the task status to `"complete"`
2. Update the next task status to `"current"`
3. Update `lastUpdated` timestamp
4. Update `note` field with progress summary

**If you forget to update this file, the workflow will appear stuck and the UI will not reflect your progress.**